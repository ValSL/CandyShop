{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %}
    Chechout
{% endblock %}

{% block content %}
    <h1>Checkout</h1>
    <form action="." method="post">
        {% csrf_token %}
        {% if user.is_authenticated %}
            {{ form.address.label }}
            {{ form.address }}
            {{ form.comment.label }}
            {{ form.comment }}
        {% else %}
            {{ form|crispy }}
        {% endif %}

        <input class="btn btn-success mt-3" type="submit" value="Place Order">
    </form>
{% endblock %}

{% block sidebar_content %}
    <h2>Your order</h2>
    <ul>
        {% for item in cart %}
            <li>
                {{ item.count }}x {{ item.product.name }}
                <span>${{ item.total_price }}</span>
            </li>
        {% endfor %}
    </ul>
    <p class="mt-3">Total: ${{ cart.get_total_price }}</p>
{% endblock %}